<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Automation Lab</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html { scroll-behavior: smooth; }
    body, * { font-family: 'Poppins', sans-serif !important; }
    .fade-in { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
    .fade-in.visible { opacity: 1; transform: translateY(0); }
  </style>
</head>
<body class="bg-gray-50 font-sans relative">
  <!-- Header, Hero, Courses, and Buy Sections here -->
  <!-- [Include your full original HTML layout as before] -->
  
  <!-- Example Buy Buttons (BDT values) -->
  <button data-name="ESP32 + Firebase IoT" data-price="150" class="buy-btn">Buy</button>
  <button data-name="MQTT & Industrial IoT" data-price="100" class="buy-btn">Buy</button>
  <button data-name="PLC Basics & Control" data-price="50" class="buy-btn">Buy</button>

  <!-- Cart and Modals HTML here (unchanged) -->

  <!-- Scripts -->
  <script>
    const cartItemsEl = document.getElementById('cart-items');
    const cartTotalEl = document.getElementById('cart-total');
    const clearCartBtn = document.getElementById('clear-cart');
    const proceedPaymentBtn = document.getElementById('proceed-payment');
    const emailModal = document.getElementById('email-modal');
    const emailForm = document.getElementById('email-form');
    const emailCancelBtn = document.getElementById('email-cancel');
    const buyerEmailInput = document.getElementById('buyer-email');
    const confirmModal = document.getElementById('confirm-modal');
    const confirmContent = document.getElementById('confirm-content');
    const cancelConfirmBtn = document.getElementById('cancel-confirm');
    const confirmPaymentBtn = document.getElementById('confirm-payment');

    let cart = [], buyerEmail = '';

    function updateProceedButton() {
      proceedPaymentBtn.disabled = cart.length === 0;
    }

    function renderCart() {
      cartItemsEl.innerHTML = '';
      let total = 0;
      cart.forEach((item, index) => {
        total += item.price;
        const li = document.createElement('li');
        li.className = 'flex justify-between items-center py-2';
        li.innerHTML = `
          <div>
            <p class="font-semibold">${item.name}</p>
            <p class="text-sm text-gray-600">৳${item.price}</p>
          </div>
          <button data-index="${index}" class="remove-btn text-red-600 hover:text-red-800 font-bold">&times;</button>
        `;
        cartItemsEl.appendChild(li);
      });
      cartTotalEl.textContent = total.toFixed(2);
      document.querySelectorAll('.remove-btn').forEach(btn => {
        btn.addEventListener('click', e => {
          const idx = e.target.getAttribute('data-index');
          cart.splice(idx, 1);
          renderCart();
          updateProceedButton();
        });
      });
      updateProceedButton();
    }

    clearCartBtn.addEventListener('click', () => {
      cart.length = 0;
      renderCart();
    });

    document.querySelectorAll('.buy-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const name = btn.getAttribute('data-name');
        const price = parseFloat(btn.getAttribute('data-price'));
        cart.push({ name, price });
        renderCart();
      });
    });

    proceedPaymentBtn.addEventListener('click', () => {
      emailModal.classList.remove('hidden');
      buyerEmailInput.value = '';
      buyerEmailInput.focus();
    });

    emailCancelBtn.addEventListener('click', () => {
      emailModal.classList.add('hidden');
    });

    emailForm.addEventListener('submit', e => {
      e.preventDefault();
      const email = buyerEmailInput.value.trim();
      if (!email) return alert('Enter valid email');
      buyerEmail = email;
      emailModal.classList.add('hidden');

      let total = cart.reduce((sum, item) => sum + item.price, 0).toFixed(2);
      const productList = cart.map(item => `${item.name} (৳${item.price})`).join('\n');
      confirmContent.textContent = `Thank you!\n\nEmail: ${buyerEmail}\nItems:\n${productList}\n\nTotal: ৳${total}\n\nClick Proceed to Payment.`;
      confirmModal.classList.remove('hidden');
    });

    cancelConfirmBtn.addEventListener('click', () => {
      confirmModal.classList.add('hidden');
    });

    confirmPaymentBtn.addEventListener('click', () => {
      confirmModal.classList.add('hidden');
      window.location.href = 'https://bka.sh/your-personal-retail-account-link';
      cart.length = 0;
      renderCart();
    });
  </script>
</body>
</html>
