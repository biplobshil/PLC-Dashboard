<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PLC Data Viewer</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
  <div class="max-w-4xl mx-auto p-4">
    <h1 class="text-2xl font-bold mb-4 text-center text-blue-800">PLC Live Data</h1>
    <table class="min-w-full bg-white rounded shadow">
      <thead>
        <tr class="bg-blue-200 text-left text-sm uppercase tracking-wider">
          <th class="p-2">Timestamp</th>
          <th class="p-2">Sensor 1</th>
          <th class="p-2">Sensor 2</th>
        </tr>
      </thead>
      <tbody id="dataBody"></tbody>
    </table>
  </div>

  <script>
    async function fetchData() {
      const response = await fetch("https://script.google.com/macros/s/AKfycbzo1t2Xy4ZRmYLOjt4f9rpbgrUeOq_vp-iY0F6pLeTHfi5sFJj-1UlqnwD3LiL-abqjAw/exec"); // Replace with your Web App URL
      const data = await response.json();
      const tbody = document.getElementById("dataBody");

      tbody.innerHTML = ""; // Clear table before loading
      data.slice(1).reverse().forEach(row => {
        tbody.innerHTML += `
          <tr class="border-t hover:bg-gray-100">
            <td class="p-2">${row.timestamp}</td>
            <td class="p-2">${row.sensor1}</td>
            <td class="p-2">${row.sensor2}</td>
          </tr>`;
      });
    }

    fetchData();
    setInterval(fetchData, 5000); // Refresh every 5 sec
  </script>
</body>
</html>
